# Distributed under the Boost Software License, Version 1.0.
# See http://www.boost.org/LICENSE_1_0.txt

include(Ryppl)
include(RypplTestSuite)

ryppl_find_and_use_package(BoostAsio)
ryppl_find_and_use_package(BoostRegex)
ryppl_find_and_use_package(BoostSystem)
ryppl_find_and_use_package(BoostTest)
ryppl_find_and_use_package(BoostThread)

ryppl_test_suite(
  RUN
    basic_datagram_socket.cpp
    basic_deadline_timer.cpp
    basic_raw_socket.cpp
    basic_seq_packet_socket.cpp
    basic_signal_set.cpp
    basic_socket_acceptor.cpp
    basic_stream_socket.cpp
    basic_streambuf.cpp
    buffer.cpp
    buffered_read_stream.cpp
    buffered_stream.cpp
    buffered_write_stream.cpp
    buffers_iterator.cpp
    completion_condition.cpp
    connect.cpp
    datagram_socket_service.cpp
    deadline_timer_service.cpp
    deadline_timer.cpp
    error.cpp
    io_service.cpp
    ip/address.cpp
    ip/address_v4.cpp
    ip/address_v6.cpp
    ip/basic_endpoint.cpp
    ip/basic_resolver.cpp
    ip/basic_resolver_entry.cpp
    ip/basic_resolver_iterator.cpp
    ip/basic_resolver_query.cpp
    ip/host_name.cpp
    ip/multicast.cpp
    ip/resolver_query_base.cpp
    ip/resolver_service.cpp
    ip/tcp.cpp
    ip/udp.cpp
    ip/unicast.cpp
    ip/v6_only.cpp
    is_read_buffered.cpp
    is_write_buffered.cpp
  # local/basic_endpoint.cpp
    local/connect_pair.cpp
    local/datagram_protocol.cpp
    local/stream_protocol.cpp
    placeholders.cpp
    posix/basic_descriptor.cpp
    posix/basic_stream_descriptor.cpp
    posix/descriptor_base.cpp
    posix/stream_descriptor.cpp
    posix/stream_descriptor_service.cpp
    raw_socket_service.cpp
    read.cpp
    read_at.cpp
    read_until.cpp
    seq_packet_socket_service.cpp
    signal_set.cpp
    signal_set_service.cpp
    socket_acceptor_service.cpp
    socket_base.cpp
    strand.cpp
    stream_socket_service.cpp
    streambuf.cpp
    time_traits.cpp
    windows/basic_handle.cpp
    windows/basic_random_access_handle.cpp
    windows/basic_stream_handle.cpp
    windows/overlapped_ptr.cpp
    windows/random_access_handle.cpp
    windows/random_access_handle_service.cpp
    windows/stream_handle.cpp
    windows/stream_handle_service.cpp
    write.cpp
    write_at.cpp
  LINK_LIBRARIES
    boost_regex
    boost_system
    boost_test_exec_monitor
    boost_thread
  NO_SINGLE_TARGET
  )
